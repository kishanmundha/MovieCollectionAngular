<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html ng-app="movieApp">
    <head>
        <title>Movies</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="css/bootstrap.css"/>
        <script src="js/jquery-1.10.2.js"></script>
        <script src="js/bootstrap.js"></script>
        <script src="js/angular.js"></script>
        <script src="js/angular-route.js"></script>
        <script src="js/angular-resource.js"></script>
        <script src="js/ui-bootstrap-tpls-0.13.0.js"></script>
        <script src="js/checklist-model.js"></script>
        <script src="js/angular-translate.js"></script>

        <script type="text/javascript" src="movies.js"></script>
        <script type="text/javascript" src="config/config.js"></script>

        <script src="app/app.js"></script>
        <script src="app/controllers.js"></script>
        <script src="app/services.js"></script>
        <script src="locale/lang.js"></script>

        <style>
            html, body {
                background-color: #eeeeee;
            }
            .margin-10
            {
                margin: 10px;
            }
            .backcolor {
                background-color: #eeeeee;
            }
            body{
                padding-top: 20px;
            }
            .play-button {
                cursor: pointer;
                display:none;
            }
            .movie-card:hover .play-button {
                display:inline;
            }

            .form-control-small-height {
                height: 25px;
                width:200px;
                padding:0px 5px;
            }

            @media (max-width: 767px) {
                .panel-filter .panel-body {
                    display: none;
                }
                .panel-filter:hover .panel-body {
                    display: block;
                }

                .filter-body-area {
                    display: none;
                }
            }

        </style>
    </head>
    <body ng-controller="movieListCtrl" ng-init='init()'>
        <div>
            <div class="col-md-3 col-sm-4">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <strong>{{ 'Filter' | translate }}</strong>
                        <span class='pull-right visible-xs'>
                            <input type='text' style='display:inline-block' class='form-control form-control-small-height' ng-model="query" placeholder="{{ 'Search' | translate }}" />
                            <span id='toggleFilterAreaBtn' style='margin-left: 10px;cursor: pointer; font-size: 120%;' ng-click='toggleFilterArea()' class="glyphicon glyphicon-collapse-down"></span>
                        </span>
                    </div>
                    <div id='filterBodyArea' class="panel-body backcolor filter-body-area">
                        <div class="form-group">
                            <label for="search" class="control-label">{{ 'Search' | translate }}</label>
                            <input id="search" type="text" class="form-control" ng-model="query" placeholder="{{ 'Search' | translate }}" />
                        </div>
                        <div class="panel panel-info panel-filter">
                            <div class="panel-heading"><strong>{{ 'Features' | translate }}</strong>  <span class='visible-xs' ng-show="filterVideoQuality.length > 0" style="font-size: 80%; text-transform: uppercase; color: black;">({{filterVideoQuality.join(', ')}})</span>
                                <span class='visible-xs' ng-show="filterSubtitles" style="font-size: 80%; text-transform: capitalize; color: black;">(Subtitles)</span>
                            </div>
                            <div class="panel-body">
                                <div class="form-group">
                                    <div ng-repeat="vq in videoQualities">
                                        <input id="vq_{{vq.id}}" type="checkbox" checklist-model="filterVideoQuality" checklist-value="vq.id" />
                                        <label for="vq_{{vq.id}}" style="text-transform: capitalize;">{{ vq.text | translate }}</label>
                                    </div>
                                </div>
                                <hr/>
                                <div class="form-group">
                                    <input id="f_subtitles" type="checkbox" ng-model="filterSubtitles"/>
                                    <label for="f_subtitles" style="text-transform: capitalize;">{{ 'subtitles' | translate }}</label>
                                </div>
                            </div>
                        </div>
                        <div class="panel panel-info panel-filter">
                            <div class="panel-heading"><strong>{{ 'Region' | translate }}</strong> <span class='visible-xs' ng-show="filterRegions.length > 0" style="font-size: 80%; text-transform: capitalize; color: black;">({{filterRegions.join(', ')}})</span></div>
                            <div class="panel-body">
                                <div class="form-group">
                                    <div ng-repeat="region in movieRegions">
                                        <input id="region_{{region}}" type="checkbox" checklist-model="filterRegions" checklist-value="region" />
                                        <label for="region_{{region}}" style="text-transform: capitalize;">{{ region | translate }}</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="panel panel-info panel-filter">
                            <div class="panel-heading"><strong>{{ 'Type' | translate }}</strong> <span class='visible-xs' ng-show="filterTypes.length > 0" style="font-size: 80%; text-transform: capitalize; color: black;">({{filterTypes.join(', ')}})</span></div>
                            <div class="panel-body">
                                <div class="form-group">
                                    <div ng-repeat="type in movieTypes">
                                        <input id="type_{{type}}" type="checkbox" checklist-model="filterTypes" checklist-value="type" />
                                        <label for="type_{{type}}" style="text-transform: capitalize;">{{ type | translate }}</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="panel panel-info panel-filter">
                            <div class="panel-heading"><strong>{{ 'Language' | translate }}</strong> <span class='visible-xs' ng-show="filterLang.length > 0" style="font-size: 80%; text-transform: capitalize; color: black;">({{filterLang.join(', ')}})</span></div>
                            <div class="panel-body">
                                <div class="form-group">
                                    <div ng-repeat="lang in movieLanguages">
                                        <input id="lang_{{lang}}" type="checkbox" checklist-model="filterLang" checklist-value="lang" />
                                        <label for="lang_{{lang}}" style="text-transform: capitalize;">{{ lang | translate }}</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-9 col-sm-8">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <strong>{{ 'Movies' | translate }}</strong>
                        <span class="pull-right">
                            <select type="text" ng-model="movieOrderBy" ng-options="o.value as o.text[lang] for o in orderByOptions" class="form-control form-control-small-height"></select>
                        </span>
                    </div>
                    <div class="panel-body backcolor">
                        <div class="row" style="margin-top: 10px;">
                            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 movie-card" ng-repeat="movie in movies| filter:search | filter:filterMovies() | orderBy: movieOrderBy">
                                <div class="panel panel-default">
                                    <div class="" style="display:inline-block">
                                        <img ng-src="{{movie.img}}" style="width:80px; height:96px; background-color: #777777;" />
                                    </div>
                                    <div style="display: inline-block; margin-left: 10px; vertical-align: top; width: 70%;">
                                        <div style="font-weight:bold;">{{movie.name[lang]|| movie.name || 'No name'}} <span class="glyphicon glyphicon-play-circle play-button" ng-click="playMovie(movie)"></span></div>
                                        <div class="row">
                                            <div class="col-xs-6">
                                                <div ng-show="movie.lang" style="font-size:12px;"><span style="text-transform:capitalize;">{{movie.lang.join(', ')}}</span></div>
                                                <div style="font-size:12px; text-transform: capitalize">{{ (movie.region || 'other') | translate}}</div>
                                                <div ng-show="movie.types" style="font-size:12px;"><span style="text-transform:capitalize;">{{movie.types.join(', ')}}</span></div>
                                                <div ng-show="movie.year" style="font-size:12px">{{ 'year' | translate }} : {{movie.year}}</div>
                                            </div>
                                            <div class="col-xs-6" style="border-left: 1px solid #eeeeee;">
                                                <rating ng-model="movie.rate" max="5" readonly="true" title='IMDB Rating : {{movie.imdb_rate}}'></rating>
                                                <div style="font-size:12px;">
                                                    <span ng-show="movie.quality.video" class="glyphicon glyphicon-{{movie.quality.video}}-video"></span>
                                                    <span ng-show="movie.subtitles" class="glyphicon glyphicon-subtitles"></span>
                                                </div>
                                                <div ng-show="movie.length" style="font-size:12px;"><span class="glyphicon glyphicon-time"></span> {{getMovieLengthString(movie.length)}}</div>
                                                <div ng-show="movie.file_size" style="font-size:12px;">{{getFileSizeString(movie.file_size)}}</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="panel-footer">
                        <span ng-hide="isFilterMode()">Total movies : {{movies.length}}</span>
                        <span ng-show="isFilterMode()">Showing movies {{(movies| filter:{'name':query} | filter:filterMovies() ).length}} of {{movies.length}}</span>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
